(function(a){a.fn.iframeAutoHeight=function(c){var e;if(a.browser==e){message=[];message.push("WARNING: you appear to be using a newer version of jquery which does not support the $.browser variable.");message.push("The jQuery iframe auto height plugin relies heavly on the $.browser features.");message.push("Install jquery-browser: https://raw.github.com/jquery/jquery-browser/master/src/jquery.browser.js");alert(message.join("\n"));return a}var d=a.extend({heightOffset:0,minHeight:0,callback:function(g){},animate:false,debug:false,diagnostics:false,resetToMinHeight:false,triggerFunctions:[],heightCalculationOverrides:[]},c);function b(g){if(d.debug&&d.debug===true&&window.console){console.log(g)}}function f(i,h){b("Diagnostics from '"+h+"'");try{b("  "+a(i,window.top.document).contents().find("body")[0].scrollHeight+" for ...find('body')[0].scrollHeight");b("  "+a(i.contentWindow.document).height()+" for ...contentWindow.document).height()");b("  "+a(i.contentWindow.document.body).height()+" for ...contentWindow.document.body).height()")}catch(g){b("  unable to check in this state")}b("End diagnostics -> results vary by browser and when diagnostics are requested")}b(d);return this.each(function(){var l=["webkit","mozilla","msie","opera"];var k=[];k["default"]=function(q,p,o,i){return p[0].scrollHeight+o.heightOffset};jQuery.each(l,function(i,o){k[o]=k["default"]});jQuery.each(d.heightCalculationOverrides,function(i,o){k[o.browser]=o.calculation});function m(i){var o=null;jQuery.each(l,function(p,q){if(i[q]){o=k[q];return false}});if(o===null){o=k["default"]}return o}var h=0;function n(o){if(d.diagnostics){f(o,"resizeHeight")}if(d.resetToMinHeight&&d.resetToMinHeight===true){o.style.height=d.minHeight+"px"}var p=a(o,window.top.document).contents().find("body");var q=m(a.browser);var i=q(o,p,d,a.browser);b(i);if(i<d.minHeight){b("new height is less than minHeight");i=d.minHeight+d.heightOffset}b("New Height: "+i);if(d.animate){a(o).animate({height:i+"px"},{duration:500})}else{o.style.height=i+"px"}d.callback.apply(a(o),[{newFrameHeight:i}])}b(this);if(d.diagnostics){f(this,"each iframe")}if(d.triggerFunctions.length>0){b(d.triggerFunctions.length+" trigger Functions");for(var g=0;g<d.triggerFunctions.length;g++){d.triggerFunctions[g](n,this)}}if(a.browser.webkit||a.browser.opera){b("browser is webkit or opera");a(this).load(function(){var i=0;var o=this;var p=function(){n(o)};if(h===0){i=500}else{o.style.height=d.minHeight+"px"}b("load delay: "+i);setTimeout(p,i);h++});var j=a(this).attr("src");a(this).attr("src","");a(this).attr("src",j)}else{a(this).load(function(){n(this)})}})}}(jQuery));