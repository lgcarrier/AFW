(function(a){a.fn.iframeAutoHeight=function(c){var d=a.extend({heightOffset:0,minHeight:0,callback:function(f){},debug:false,diagnostics:false},c);function b(f){if(d.debug&&d.debug===true&&window.console){console.log(f)}}function e(h,g){b("Diagnostics from '"+g+"'");try{b("  "+a(h,window.top.document).contents().find("body")[0].scrollHeight+" for ...find('body')[0].scrollHeight");b("  "+a(h.contentWindow.document).height()+" for ...contentWindow.document).height()");b("  "+a(h.contentWindow.document.body).height()+" for ...contentWindow.document.body).height()")}catch(f){b("  unable to check in this state")}b("End diagnostics -> results vary by browser and when diagnostics are requested")}b(d);a(this).each(function(){var f=0;function h(j){if(d.diagnostics){e(j,"resizeHeight")}var k=a(j,window.top.document).contents().find("body");var i=k[0].scrollHeight+d.heightOffset;if(i<d.minHeight){b("new height is less than minHeight");i=d.minHeight+d.heightOffset}b("New Height: "+i);j.style.height=i+"px";d.callback({newFrameHeight:i})}b(this);if(d.diagnostics){e(this,"each iframe")}if(a.browser.safari||a.browser.opera){b("browser is webkit or opera");a(this).load(function(){var i=0;var j=this;j.style.height="0px";var k=function(){h(j)};if(f===0){i=500}b("load delay: "+i);setTimeout(k,i);f++});var g=a(this).attr("src");a(this).attr("src","");a(this).attr("src",g)}else{a(this).load(function(){h(this)})}})}}(jQuery));