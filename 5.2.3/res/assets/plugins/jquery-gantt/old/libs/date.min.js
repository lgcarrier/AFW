Date.$VERSION=1.02;Date.LZ=function(a){return(a<0||a>9?"":"0")+a};Date.monthNames=new Array("January","February","March","April","May","June","July","August","September","October","November","December");Date.monthAbbreviations=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Date.dayNames=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");Date.dayAbbreviations=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.preferAmericanFormat=true;Date.firstDayOfWeek=0;Date.defaultFormat="dd/MM/yyyy";if(!Date.prototype.getFullYear){Date.prototype.getFullYear=function(){var a=this.getYear();return(a<1900?a+1900:a)}}Date.parseString=function(I,A){if(typeof(A)=="undefined"||A==null||A==""){var o=new Array(Date.defaultFormat,"y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM");var b=new Array("M/d/y","M-d-y","M.d.y","M/d","M-d");var n=new Array("d/M/y","d-M-y","d.M.y","d/M","d-M");var e=new Array(o,Date.preferAmericanFormat?b:n,Date.preferAmericanFormat?n:b);for(var w=0;w<e.length;w++){var u=e[w];for(var v=0;v<u.length;v++){var B=Date.parseString(I,u[v]);if(B!=null){return B}}}return null}this.isInteger=function(d){for(var c=0;c<d.length;c++){if("1234567890".indexOf(d.charAt(c))==-1){return false}}return true};this.getInt=function(J,l,y,j){for(var c=j;c>=y;c--){var d=J.substring(l,l+c);if(d.length<y){return null}if(this.isInteger(d)){return d}}return null};this.decodeShortcut=function(l){var d=l.trim().toUpperCase();var i=new Date();i.clearTime();if(["NOW","N"].indexOf(d)>=0){i=new Date()}else{if(["TODAY","T"].indexOf(d)>=0){}else{if(["YESTERDAY","Y"].indexOf(d)>=0){i.setDate(i.getDate()-1)}else{if(["TOMORROW","TO"].indexOf(d)>=0){i.setDate(i.getDate()+1)}else{if(["W","TW","WEEK","THISWEEK","WEEKSTART","THISWEEKSTART"].indexOf(d)>=0){i.setFirstDayOfThisWeek()}else{if(["LW","LASTWEEK","LASTWEEKSTART"].indexOf(d)>=0){i.setFirstDayOfThisWeek();i.setDate(i.getDate()-7)}else{if(["NW","NEXTWEEK","NEXTWEEKSTART"].indexOf(d)>=0){i.setFirstDayOfThisWeek();i.setDate(i.getDate()+7)}else{if(["M","TM","MONTH","THISMONTH","MONTHSTART","THISMONTHSTART"].indexOf(d)>=0){i.setDate(1)}else{if(["LM","LASTMONTH","LASTMONTHSTART"].indexOf(d)>=0){i.setDate(1);i.setMonth(i.getMonth()-1)}else{if(["NM","NEXTMONTH","NEXTMONTHSTART"].indexOf(d)>=0){i.setDate(1);i.setMonth(i.getMonth()+1)}else{if(["Q","TQ","QUARTER","THISQUARTER","QUARTERSTART","THISQUARTERSTART"].indexOf(d)>=0){i.setDate(1);i.setMonth(Math.floor((i.getMonth())/3)*3)}else{if(["LQ","LASTQUARTER","LASTQUARTERSTART"].indexOf(d)>=0){i.setDate(1);i.setMonth(Math.floor((i.getMonth())/3)*3-3)}else{if(["NQ","NEXTQUARTER","NEXTQUARTERSTART"].indexOf(d)>=0){i.setDate(1);i.setMonth(Math.floor((i.getMonth())/3)*3+3)}else{if(/^-?[0-9]+[DWMY]$/.test(d)){var c=d.substr(d.length-1);var j=parseInt(d.substr(0,d.length-1));if(c=="W"){i.setDate(i.getDate()+j*7)}else{if(c=="M"){i.setMonth(i.getMonth()+j)}else{if(c=="Y"){i.setYear(i.getYear()+j)}}}}else{i=undefined}}}}}}}}}}}}}}return i};var H=this.decodeShortcut(I);if(H){return H}I=I+"";A=A+"";var G=0;var r=0;var D="";var g="";var F="";var k,h;var m=new Date().getFullYear();var E=1;var C=1;var a=0;var z=0;var t=0;var q="";while(r<A.length){D=A.charAt(r);g="";while((A.charAt(r)==D)&&(r<A.length)){g+=A.charAt(r++)}if(g=="yyyy"||g=="yy"||g=="y"){if(g=="yyyy"){k=4;h=4}if(g=="yy"){k=2;h=2}if(g=="y"){k=2;h=4}m=this.getInt(I,G,k,h);if(m==null){return null}G+=m.length;if(m.length==2){if(m>70){m=1900+(m-0)}else{m=2000+(m-0)}}}else{if(g=="MMM"||g=="MMMM"){E=0;var p=(g=="MMMM"?(Date.monthNames.concat(Date.monthAbbreviations)):Date.monthAbbreviations);for(var w=0;w<p.length;w++){var f=p[w];if(I.substring(G,G+f.length).toLowerCase()==f.toLowerCase()){E=(w%12)+1;G+=f.length;break}}if((E<1)||(E>12)){return null}}else{if(g=="E"||g=="EE"||g=="EEE"||g=="EEEE"){var p=(g=="EEEE"?Date.dayNames:Date.dayAbbreviations);for(var w=0;w<p.length;w++){var s=p[w];if(I.substring(G,G+s.length).toLowerCase()==s.toLowerCase()){G+=s.length;break}}}else{if(g=="MM"||g=="M"){E=this.getInt(I,G,g.length,2);if(E==null||(E<1)||(E>12)){return null}G+=E.length}else{if(g=="dd"||g=="d"){C=this.getInt(I,G,g.length,2);if(C==null||(C<1)||(C>31)){return null}G+=C.length}else{if(g=="hh"||g=="h"){a=this.getInt(I,G,g.length,2);if(a==null||(a<1)||(a>12)){return null}G+=a.length}else{if(g=="HH"||g=="H"){a=this.getInt(I,G,g.length,2);if(a==null||(a<0)||(a>23)){return null}G+=a.length}else{if(g=="KK"||g=="K"){a=this.getInt(I,G,g.length,2);if(a==null||(a<0)||(a>11)){return null}G+=a.length;a++}else{if(g=="kk"||g=="k"){a=this.getInt(I,G,g.length,2);if(a==null||(a<1)||(a>24)){return null}G+=a.length;a--}else{if(g=="mm"||g=="m"){z=this.getInt(I,G,g.length,2);if(z==null||(z<0)||(z>59)){return null}G+=z.length}else{if(g=="ss"||g=="s"){t=this.getInt(I,G,g.length,2);if(t==null||(t<0)||(t>59)){return null}G+=t.length}else{if(g=="a"){if(I.substring(G,G+2).toLowerCase()=="am"){q="AM"}else{if(I.substring(G,G+2).toLowerCase()=="pm"){q="PM"}else{return null}}G+=2}else{if(I.substring(G,G+g.length)!=g){return null}else{G+=g.length}}}}}}}}}}}}}}if(G!=I.length){return null}if(E==2){if(((m%4==0)&&(m%100!=0))||(m%400==0)){if(C>29){return null}}else{if(C>28){return null}}}if((E==4)||(E==6)||(E==9)||(E==11)){if(C>30){return null}}if(a<12&&q=="PM"){a=a-0+12}else{if(a>11&&q=="AM"){a-=12}}return new Date(m,E-1,C,a,z,t)};Date.isValid=function(b,a){return(Date.parseString(b,a)!=null)};Date.prototype.isBefore=function(a){if(a==null){return false}return(this.getTime()<a.getTime())};Date.prototype.isAfter=function(a){if(a==null){return false}return(this.getTime()>a.getTime())};Date.prototype.equals=function(a){if(a==null){return false}return(this.getTime()==a.getTime())};Date.prototype.equalsIgnoreTime=function(c){if(c==null){return false}var b=new Date(this.getTime()).clearTime();var a=new Date(c.getTime()).clearTime();return(b.getTime()==a.getTime())};Date.prototype.format=function(k){if(!k){k=Date.defaultFormat}k=k+"";var p="";var e=0;var h="";var b="";var i=this.getFullYear()+"";var f=this.getMonth()+1;var g=this.getDate();var o=this.getDay();var l=this.getHours();var a=this.getMinutes();var n=this.getSeconds();var j=new Object();if(i.length<4){i=""+(+i+1900)}j.y=""+i;j.yyyy=i;j.yy=i.substring(2,4);j.M=f;j.MM=Date.LZ(f);j.MMM=Date.monthAbbreviations[f-1];j.MMMM=Date.monthNames[f-1];j.d=g;j.dd=Date.LZ(g);j.E=Date.dayAbbreviations[o];j.EE=Date.dayAbbreviations[o];j.EEE=Date.dayAbbreviations[o];j.EEEE=Date.dayNames[o];j.H=l;j.HH=Date.LZ(l);if(l==0){j.h=12}else{if(l>12){j.h=l-12}else{j.h=l}}j.hh=Date.LZ(j.h);j.K=j.h-1;j.k=j.H+1;j.KK=Date.LZ(j.K);j.kk=Date.LZ(j.k);if(l>11){j.a="PM"}else{j.a="AM"}j.m=a;j.mm=Date.LZ(a);j.s=n;j.ss=Date.LZ(n);while(e<k.length){h=k.charAt(e);b="";while((k.charAt(e)==h)&&(e<k.length)){b+=k.charAt(e++)}if(typeof(j[b])!="undefined"){p=p+j[b]}else{p=p+b}}return p};Date.prototype.getDayName=function(){return Date.dayNames[this.getDay()]};Date.prototype.getDayAbbreviation=function(){return Date.dayAbbreviations[this.getDay()]};Date.prototype.getMonthName=function(){return Date.monthNames[this.getMonth()]};Date.prototype.getMonthAbbreviation=function(){return Date.monthAbbreviations[this.getMonth()]};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.add=function(a,c){if(typeof(a)=="undefined"||a==null||typeof(c)=="undefined"||c==null){return this}c=+c;if(a=="y"){this.setFullYear(this.getFullYear()+c)}else{if(a=="M"){this.setMonth(this.getMonth()+c)}else{if(a=="d"){this.setDate(this.getDate()+c)}else{if(a=="w"){var b=(c>0)?1:-1;while(c!=0){this.add("d",b);while(this.getDay()==0||this.getDay()==6){this.add("d",b)}c-=b}}else{if(a=="h"){this.setHours(this.getHours()+c)}else{if(a=="m"){this.setMinutes(this.getMinutes()+c)}else{if(a=="s"){this.setSeconds(this.getSeconds()+c)}}}}}}}return this};Date.prototype.toInt=function(){return this.getFullYear()*10000+(this.getMonth()+1)*100+this.getDate()};Date.fromInt=function(c){var b=parseInt(c/10000);var d=parseInt((c-b*10000)/100);var a=parseInt(c-b*10000-d*100);return new Date(b,d-1,a,12,0,0)};Date.prototype.isHoliday=function(){return isHoliday(this)};Date.prototype.isToday=function(){return this.toInt()==new Date().toInt()};Date.prototype.incrementDateByWorkingDays=function(b){var a=Math.abs(b);while(a>0){this.setDate(this.getDate()+(b>0?1:-1));if(!this.isHoliday()){a--}}return this};Date.prototype.distanceInWorkingDays=function(b){var e=new Date(this.getTime());e.setHours(23,59,59,999);var d=0;var c=new Date(b.getTime());c.setHours(23,59,59,999);var a=c.getTime();while(e.getTime()<=a){d=d+(isHoliday(e)?0:1);e.setDate(e.getDate()+1)}return d};Date.prototype.setFirstDayOfThisWeek=function(a){if(!a){a=Date.firstDayOfWeek}this.setDate(this.getDate()-this.getDay()+a-(this.getDay()==0&&a!=0?7:0))};