/*!
 * clueTip - v1.2.10 - 2013-07-20
 * http://plugins.learningjquery.com/cluetip/
 * Copyright (c) 2013 Karl Swedberg
 * Licensed MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function(f){f.cluetip={version:"1.2.10",template:["<div>",'<div class="cluetip-outer">','<h3 class="cluetip-title ui-widget-header ui-cluetip-header"></h3>','<div class="cluetip-inner ui-widget-content ui-cluetip-content"></div>',"</div>",'<div class="cluetip-extra"></div>',"</div>"].join(""),setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:false,width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,snapToEdge:false,local:false,localPrefix:null,localIdSuffix:null,hideLocal:true,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:false,showTitle:true,cluetipClass:"default",hoverClass:"",waitImage:true,cursor:"help",arrows:false,dropShadow:true,dropShadowSteps:6,sticky:false,mouseOutClose:false,delayedClose:50,activation:"hover",clickThrough:true,tracking:false,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(h){return true},onShow:function(i,h){},onHide:function(i,h){},ajaxCache:true,ajaxProcess:function(h){h=h.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"");return h},ajaxSettings:{dataType:"html"},debug:false}};var g,a="cluetip ui-widget ui-widget-content ui-cluetip",c={},b=0,e=0;var d=function(h){return h.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")};f.fn.attrProp=f.fn.prop||f.fn.attr;f.fn.cluetip=function(s,i){var r,j,n,l,q,u;if(typeof s=="object"){i=s;s=null}if(s=="destroy"){this.each(function(z){var B=f(this),A=B.data("cluetip");if(A){f(A.selector).remove();f.removeData(this,"title");f.removeData(this,"cluetip")}if(A.title){B.attrProp("title",A.title)}B.unbind(".cluetip").unbind("cluetipMoc")});if(!f('[id^="cluetip"]').length){f(document).unbind(".cluetip")}return this}i=f.extend(true,{},f.cluetip.defaults,i||{});b++;var y,k=f.cluetip.backCompat||!i.multiple?"cluetip":"cluetip-"+b,p="#"+k,t=f.cluetip.backCompat?"#":".",v=f.cluetip.setup.insertionType,x=f.cluetip.setup.insertionElement||"body";v=(/appendTo|prependTo|insertBefore|insertAfter/).test(v)?v:"appendTo";r=f(p);if(!r.length){r=f(f.cluetip.template)[v](x).attr("id",k).css({position:"absolute",display:"none"});y=+i.cluezIndex;n=r.find(t+"cluetip-outer").css({position:"relative",zIndex:y});j=r.find(t+"cluetip-inner");l=r.find(t+"cluetip-title");r.bind("mouseenter mouseleave",function(z){f(this).data("entered",z.type==="mouseenter")})}g=f("#cluetip-waitimage");if(!g.length&&i.waitImage){g=f("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"});g.insertBefore(r).hide()}var w=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0);this.each(function(Y){var O,H=this,N=f(this),V=f.extend(true,{},i,f.metadata?N.metadata():f.meta?N.data():N.data("cluetip")||{}),C=false,ag=false,af=null,T=V[V.attribute]||(V.attribute=="href"?N.attr(V.attribute):N.attrProp(V.attribute)||N.attr(V.attribute)),F=V.cluetipClass;y=+V.cluezIndex;N.data("cluetip",{title:H.title,zIndex:y,selector:p,cursor:H.style.cursor||""});if(V.arrows&&!r.find(".cluetip-arrows").length){r.append('<div class="cluetip-arrows ui-state-default"></div>')}if(!T&&!V.splitTitle&&!s){return true}if(V.local&&V.localPrefix){T=V.localPrefix+T}if(V.local&&V.hideLocal&&T){f(T+":first").hide()}var U=parseInt(V.topOffset,10),Q=parseInt(V.leftOffset,10);var P,ah,L=isNaN(parseInt(V.height,10))?"auto":(/\D/g).test(V.height)?V.height:V.height+"px";var z,I,X,Z,am,ab,ai;var M=parseInt(V.width,10)||275,aj=M+w+V.dropShadowSteps,R=this.offsetWidth,J,aa,an,ac,B;var ae;var W=(V.attribute!="title")?N.attr(V.titleAttribute)||"":"";if(V.escapeTitle){W=d(W)}if(V.splitTitle){ae=W.split(V.splitTitle);W=V.showTitle||ae[0]===""?ae.shift():""}var E;function al(){return false}N.bind("mouseenter mouseleave",function(ao){var ap=N.data("cluetip");ap.entered=ao.type==="entered";N.data("cluetip",ap)});var K=function(ao){var ap,ay,au,aw=V.onActivate.call(H,ao);if(aw===false){return false}ag=true;r=f(p).css({position:"absolute"});n=r.find(t+"cluetip-outer");j=r.find(t+"cluetip-inner");l=r.find(t+"cluetip-title");q=r.find(t+"cluetip-arrows");r.removeClass().css({width:M});if(T==N.attr("href")){N.css("cursor",V.cursor)}if(V.hoverClass){N.addClass(V.hoverClass)}I=Z=N.offset().top;X=I+N.innerHeight();J=N.offset().left;if(f(x).css("position")==="relative"){J-=f(x)[0].getBoundingClientRect().left}R=N.innerWidth();if(ao.type==focus){ac=J+(R/2)+Q;r.css({left:aa});ab=Z+U}else{ac=ao.pageX;ab=ao.pageY}if(H.tagName.toLowerCase()!="area"){z=f(document).scrollTop();B=f(window).width()}if(V.positionBy=="fixed"){aa=R+J+Q;r.css({left:aa})}else{aa=(R>J&&J>aj)||J+R+aj+Q>B?J-aj-Q:R+J+Q;if(H.tagName.toLowerCase()=="area"||V.positionBy=="mouse"||R+aj>B){if(ac+20+aj>B){r.addClass("cluetip-"+F);aa=(ac-aj-Q)>=0?ac-aj-Q-parseInt(r.css("marginLeft"),10)+parseInt(j.css("marginRight"),10):ac-(aj/2)}else{aa=ac+Q}}ap=aa<0?ao.pageY+U:ao.pageY;if(aa<0||V.positionBy=="bottomTop"||V.positionBy=="topBottom"){aa=(ac+(aj/2)>B)?B/2-aj/2:Math.max(ac-(aj/2),0)}}q.css({zIndex:N.data("cluetip").zIndex+1});r.css({left:aa,zIndex:N.data("cluetip").zIndex});ah=f(window).height();if(s){if(typeof s=="function"){O=s.call(H)}else{O=s}j.html(O);ad(ap)}else{if(ae){var ar=ae.length;j.html(ar?ae[0]:"");if(ar>1){for(var aq=1;aq<ar;aq++){j.append('<div class="split-body">'+ae[aq]+"</div>")}}ad(ap)}else{if(!V.local&&T.indexOf("#")!==0){if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(T)){j.html('<img src="'+T+'" alt="'+W+'" />');ad(ap)}else{var ax=V.ajaxSettings.beforeSend,at=V.ajaxSettings.error,av=V.ajaxSettings.success,aB=V.ajaxSettings.complete;au=m(T,V.ajaxSettings.data);var aA={cache:V.ajaxCache,url:T,beforeSend:function(aD,aC){if(ax){ax.call(H,aD,r,j,aC)}n.children().empty();if(V.waitImage){g.css({top:ab+20,left:ac+20,zIndex:N.data("cluetip").zIndex-1}).show()}},error:function(aC,aD){if(i.ajaxCache&&!c[au]){c[au]={status:"error",textStatus:aD,xhr:aC}}if(ag){if(at){at.call(H,aC,aD,r,j)}else{j.html("<i>sorry, the contents could not be loaded</i>")}}},success:function(aC,aE,aD){if(i.ajaxCache&&!c[au]){c[au]={status:"success",data:aC,textStatus:aE,xhr:aD}}C=V.ajaxProcess.call(H,aC);if(typeof C=="object"&&C!==null){W=C.title;C=C.content}if(ag){if(av){av.call(H,aC,aE,r,j)}j.html(C)}},complete:function(aE,aG){if(aB){aB.call(H,aE,aG,r,j)}var aF=j[0].getElementsByTagName("img");e=aF.length;for(var aD=0,aC=aF.length;aD<aC;aD++){if(aF[aD].complete){e--}}if(e){f(aF).bind("load.ct error.ct",function(){e--;if(e===0){g.hide();f(aF).unbind(".ct");if(ag){ad(ap)}}})}else{g.hide();if(ag){ad(ap)}}}};ay=f.extend(true,{},V.ajaxSettings,aA);if(c[au]){G(c[au],ay)}else{f.ajax(ay)}}}else{if(V.local){var az=f(T+(/^#\S+$/.test(T)?"":":eq("+Y+")")).clone(true).show();if(V.localIdSuffix){az.attr("id",az[0].id+V.localIdSuffix)}j.html(az);ad(ap)}}}}};var ad=function(au){var ao,ay,at,ap=W||V.showTitle&&"&nbsp;",av="",aw="",ar=false;var ax={bottom:function(az){az.appendTo(j)},top:function(az){az.prependTo(j)},title:function(az){az.prependTo(l)}};r.addClass("cluetip-"+F);if(V.truncate){var aq=j.text().slice(0,V.truncate)+"...";j.html(aq)}if(ap){l.show().html(ap)}else{l.hide()}if(V.sticky){if(ax[V.closePosition]){ao=f('<div class="cluetip-close"><a href="#">'+V.closeText+"</a></div>");ax[V.closePosition](ao);ao.bind("click.cluetip",function(){S();return false})}if(V.mouseOutClose){N.unbind("mouseleave.cluetipMoc");r.unbind("mouseleave.cluetipMoc");if(V.mouseOutClose=="both"||V.mouseOutClose=="cluetip"||V.mouseOutClose===true){r.bind("mouseleave.cluetipMoc",A)}if(V.mouseOutClose=="both"||V.mouseOutClose=="link"){N.bind("mouseleave.cluetipMoc",A)}}}n.css({zIndex:N.data("cluetip").zIndex,overflow:L=="auto"?"visible":"auto",height:L});P=L=="auto"?Math.max(r.outerHeight(),r.height()):parseInt(L,10);am=Z;ai=z+ah;ar=(aa<ac&&(Math.max(aa,0)+aj>ac));if(V.positionBy=="fixed"){am=Z-V.dropShadowSteps+U}else{if(V.positionBy=="topBottom"||V.positionBy=="bottomTop"||ar){if(V.positionBy=="topBottom"){if(Z+P+U<ai&&ab-z<P+U){aw="bottom"}else{aw="top"}}else{if(V.positionBy=="bottomTop"||ar){if(Z+P+U>ai&&ab-z>P+U){aw="top"}else{aw="bottom"}}}if(V.snapToEdge){if(aw=="top"){am=I-P-U}else{if(aw=="bottom"){am=X+U}}}else{if(aw=="top"){am=ab-P-U}else{if(aw=="bottom"){am=ab+U}}}}else{if(Z+P+U>ai){am=(P>=ah)?z:ai-P-U}else{if(N.css("display")=="block"||H.tagName.toLowerCase()=="area"||V.positionBy=="mouse"){am=au-U}else{am=Z-V.dropShadowSteps}}}}if(aw===""){aw=aa<J?"left":"right"}ay=" clue-"+aw+"-"+F+" cluetip-"+F;if(F=="rounded"){ay+=" ui-corner-all"}r.css({top:am+"px"}).attrProp({className:a+ay});if(V.arrows){if(/(left|right)/.test(aw)){at=r.height()-q.height();av=aa>=0&&au>0?(Z-am-V.dropShadowSteps):0;av=at>av?av:at;av+="px"}q.css({top:av}).show()}else{q.hide()}u=o(r,V);if(u&&u.length){u.hide().css({height:P,width:M,zIndex:N.data("cluetip").zIndex-1}).show()}if(!af){r.hide()}clearTimeout(af);af=null;r[V.fx.open](V.fx.openSpeed||0);if(f.fn.bgiframe){r.bgiframe()}V.onShow.call(H,r,j)};var ak=function(ao){ag=false;g.hide();if(!V.sticky||(/click|toggle/).test(V.activation)){if(V.delayedClose>0){clearTimeout(af);af=null;af=setTimeout(S,V.delayedClose)}else{S();clearTimeout(af)}}if(V.hoverClass){N.removeClass(V.hoverClass)}};var S=function(av){var aq=av&&av.data("cluetip")?av:N,at=aq.data("cluetip")&&aq.data("cluetip").selector,ap=at||"div.cluetip",au=f(ap),ao=au.find(t+"cluetip-inner"),ar=au.find(t+"cluetip-arrows");au.hide().removeClass();V.onHide.call(aq[0],au,ao);if(at){aq.removeClass("cluetip-clicked");N.css("cursor",N.data("cluetip").cursor)}if(at&&W){aq.attrProp(V.titleAttribute,W)}if(V.arrows){ar.css({top:""})}if(u){u.hide()}};var A=function(){var ao=this;clearTimeout(af);af=setTimeout(function(){var aq=N.data("cluetip").entered,ap=r.data("entered"),ar=false;if(V.mouseOutClose=="both"&&(aq||ap)){ar=true}else{if((V.mouseOutClose===true||V.mouseOutClose=="cluetip")&&ap){ar=true}else{if(V.mouseOutClose=="link"&&aq){ar=true}}}if(!ar){S.call(ao)}},V.delayedClose)};f(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(ao){S(f(ao.target))});if((/click|toggle/).test(V.activation)){N.bind("click.cluetip",function(ao){if(r.is(":hidden")||!N.is(".cluetip-clicked")){K(ao);f(".cluetip-clicked").removeClass("cluetip-clicked");N.addClass("cluetip-clicked")}else{ak(ao)}return false})}else{if(V.activation=="focus"){N.bind("focus.cluetip",function(ao){N.attrProp("title","");K(ao)});N.bind("blur.cluetip",function(ao){N.attrProp("title",N.data("cluetip").title);ak(ao)})}else{N[V.clickThrough?"unbind":"bind"]("click.cluetip",al);var D=function(ao){if(V.tracking){var aq=aa-ao.pageX;var ap=am?am-ao.pageY:Z-ao.pageY;N.bind("mousemove.cluetip",function(ar){r.css({left:ar.pageX+aq,top:ar.pageY+ap})})}};if(f.fn.hoverIntent&&V.hoverIntent){N.hoverIntent({sensitivity:V.hoverIntent.sensitivity,interval:V.hoverIntent.interval,over:function(ao){K(ao);D(ao)},timeout:V.hoverIntent.timeout,out:function(ao){ak(ao);N.unbind("mousemove.cluetip")}})}else{N.bind("mouseenter.cluetip",function(ao){K(ao);D(ao)}).bind("mouseleave.cluetip",function(ao){ak(ao);N.unbind("mousemove.cluetip")})}N.bind("mouseover.cluetip",function(ao){N.attrProp("title","")}).bind("mouseleave.cluetip",function(ao){N.attrProp("title",N.data("cluetip").title)})}}function G(aq,ap){var ao=aq.status;ap.beforeSend(aq.xhr,ap);if(ao=="error"){ap[ao](aq.xhr,aq.textStatus)}else{if(ao=="success"){ap[ao](aq.data,aq.textStatus,aq.xhr)}}ap.complete(aq.xhr,ap.textStatus)}});function h(){}function m(z,A){var B=z||"";A=A||"";if(typeof A=="object"){f.each(A,function(C,D){B+="-"+C+"-"+D})}else{if(typeof A=="string"){B+=A}}return B}function o(E,H,G){var z="",A=(H.dropShadow&&H.dropShadowSteps)?+H.dropShadowSteps:0;if(f.support.boxShadow){if(A){z="1px 1px "+A+"px rgba(0,0,0,0.5)"}var C=A===0?"0 0 ":"1px 1px ";E.css(f.support.boxShadow,z);return false}var D=E.find(".cluetip-drop-shadow");if(A==D.length){return D}D.remove();var F=[];for(var B=0;B<A;){F[B++]='<div style="top:'+B+"px;left:"+B+'px;"></div>'}G=f(F.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:y-1,opacity:0.1}).addClass("cluetip-drop-shadow").prependTo(E);return G}return this};(function(){f.support=f.support||{};var h=document.createElement("div"),l=h.style,s=["boxShadow"],q=["moz","Moz","webkit","o"];for(var r=0,n=s.length;r<n;r++){var k=s[r],m=k.charAt(0).toUpperCase()+k.slice(1);if(typeof l[k]!=="undefined"){f.support[k]=k}else{for(var p=0,o=q.length;p<o;p++){if(typeof l[q[p]+m]!=="undefined"){f.support[k]=q[p]+m;break}}}}h=null})();f.fn.cluetip.defaults=f.cluetip.defaults})(jQuery);