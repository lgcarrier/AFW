afw.afw_21.actio_dynmq.tutrl={insta:[],obten:function(b){var c;for(var a=0;a<afw.afw_21.actio_dynmq.tutrl.insta.length;a++){if(afw.afw_21.actio_dynmq.tutrl.insta[a].id==b){c=afw.afw_21.actio_dynmq.tutrl.insta[a];break}}return c},suprm:function(b){for(var a=0;a<afw.afw_21.actio_dynmq.tutrl.insta.length;a++){if(afw.afw_21.actio_dynmq.tutrl.insta[a].id==b){afw.afw_21.actio_dynmq.tutrl.insta.splice(a,1)}}},tutrl:function(a){this.jQuery=afw.jQuery;var c=this;this.node=false;this.id=false;this.initl=b;this.tour=false;this.optio={vva_nom:"",vva_plugn_ajax:"",vva_nom_plugn:"",var_etape:[],var_etape_suivn:[],vnu_seqnc_tutrl:"",vnu_etape_actue:0};this.initl(a);return c;function b(d){c.optio=c.jQuery.extend(c.optio,d);c.id=c.optio.id;c.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,widget_action:"OBTEN_LISTE_ETAPE",x01:c.optio.vnu_seqnc_tutrl,sucs_procs:function(e){c.optio.var_etape=e.liste_etape;c.tour=new Tour({name:c.optio.vva_nom,steps:c.optio.var_etape,storage:false,debug:false,template:"<div class='popover tour'><div class='arrow'></div><h3 class='popover-title'></h3> <div class='popover-content'></div><div class='popover-navigation'><div class='btn-group'><button class='btn btn-default' data-role='prev'>« Prev</button><button class='btn btn-primary' data-role='next'>Next »</button></div><button class='btn btn-link' data-role='end'>End tour</button></div></div>",onStart:function(){apex.event.trigger(c.jQuery("body"),"tutrlstart_actio_dynmq."+c.optio.vva_nom_plugn);c.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,widget_action:"OUVER_TOUR",x01:c.optio.vnu_seqnc_tutrl,x02:c.tour.getCurrentStep(),sucs_procs:function(f){console.log("start success")}})},onShow:function(){apex.event.trigger(c.jQuery("body"),"tutrlshowstep_actio_dynmq."+c.optio.vva_nom_plugn);c.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,widget_action:"AFICH_ETAPE",x01:c.optio.vnu_seqnc_tutrl,x02:c.tour.getCurrentStep(),sucs_procs:function(f){console.log("show step "+c.tour.getCurrentStep())}})},onShown:function(){apex.event.trigger(c.jQuery("body"),"tutrlshowstepend_actio_dynmq."+c.optio.vva_nom_plugn);c.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,widget_action:"FIN_AFICH_ETAPE",x01:c.optio.vnu_seqnc_tutrl,x02:c.tour.getCurrentStep(),sucs_procs:function(f){console.log("shown step "+c.tour.getCurrentStep())}})},onEnd:function(){apex.event.trigger(c.jQuery("body"),"tutrlend_actio_dynmq."+c.optio.vva_nom_plugn);c.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,widget_action:"FERMR_TOUR",x01:c.optio.vnu_seqnc_tutrl,sucs_procs:function(f){console.log("end success")}})}});c.tour.init();if(c.optio.vnu_etape_actue!=0){c.tour.goTo(c.optio.vnu_etape_actue)}c.tour.start()},error_procs:function(e){console.log("error obten_liste_etape")}})}return c}};