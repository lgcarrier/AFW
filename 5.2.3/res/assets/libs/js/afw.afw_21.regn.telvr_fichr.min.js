afw.afw_21.regn.telvr_fichr={insta:[],obten:function(b){var c;for(var a=0;a<afw.afw_21.regn.telvr_fichr.insta.length;a++){if(afw.afw_21.regn.telvr_fichr.insta[a].id==b){c=afw.afw_21.regn.telvr_fichr.insta[a];break}}return c},suprm:function(b){for(var a=0;a<afw.afw_21.regn.telvr_fichr.insta.length;a++){if(afw.afw_21.regn.telvr_fichr.insta[a].id==b){afw.afw_21.regn.telvr_fichr.insta.splice(a,1)}}},telvr_fichr:function(h){this.jQuery=afw.jQuery;var d=this;this.node=false;this.id=false;this.vnu_seqnc_fichr=0;this.vnu_tail_maxml=10;this.var_liste_fichr={liste_fichr:[]};this.initl=i;this._defnr_outpt=e;this._defnr_liste_fichr_a_telvr=g;this._selct_termn=a;this._selct=f;this._depsr=c;this._glisr_par_des=b;this.optio={vva_id_regn:"",vva_plugn_ajax:"",vbo_telvr_multp:true,vva_mesg_limt_tail_fichr:"",vva_mesg_navgt_obsol:"",vva_mesg_limt_telvr:""};this.initl(h);return d;function i(j){d.optio=d.jQuery.extend(true,d.optio,j);try{switch(typeof(d.optio.vva_id_regn)){case"string":d.node=document.getElementById(d.optio.vva_id_regn);break;default:d.node=false;break}}catch(k){d.node=false}if(d.node){d.id=d.node.id;if(!(window.File&&window.FileReader&&window.FileList&&window.Blob)){d.jQuery("#"+d.id).hide();d.jQuery("#"+d.id).after('<div class="navgt_obsol">'+d.optio.vva_mesg_navgt_obsol+"<div>")}d.jQuery("input","#"+d.id).change(d._selct);var l;if(navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/)){l=d.jQuery("body").get(0)}else{l=d.jQuery(".drop_zone","#"+d.id).get(0)}l.addEventListener("dragover",d._glisr_par_des,false);l.addEventListener("drop",d._depsr,false);l.addEventListener("click",function(){$("#selct_fichr").click()},false)}}function e(j){var k=[];d.jQuery(j.liste_fichr).each(function(l,n){if(n.indic_a_telvr){var m=n.fichr.size/1024/1024;k.push('<li><div id="fichr_'+n.seqnc+'"><div><strong>',n.fichr.name,"</strong> (",n.fichr.type||"n/d",") - ",m.toFixed(2)," Mo, derni√®re modification: ",n.fichr.lastModifiedDate?n.fichr.lastModifiedDate.toLocaleDateString():"n/d</div>",'<div><progress class="barre_progr" max="100" value="1"><span class="percent">1</span>%</progress></div>',"</div>","</li>")}});d.jQuery("output ul","#"+d.id).append(k.join(""))}function a(){apex.event.trigger(d.jQuery(document),"selct_termn_regn."+d.optio.vva_nom_plugn)}function g(j){for(var k=0,m;m=j[k];k++){var l=m.size/1024/1024;if(l<=d.vnu_tail_maxml){d.vnu_seqnc_fichr++;d.var_liste_fichr.liste_fichr.push({seqnc:d.vnu_seqnc_fichr,indic_a_telvr:true,fichr:m})}else{var n=d.optio.vva_mesg_limt_tail_fichr.replace("#NOM_FICHR#",m.name).replace("#TAIL_FICHR#",l.toFixed(2)).replace("#TAIL_MAXM#",d.vnu_tail_maxml);alert(n)}}}function f(j){if(!d.optio.vbo_telvr_multp&&(j.target.files.length>1||d.var_liste_fichr.liste_fichr.length>0)){alert(d.optio.vva_mesg_limt_telvr);return false}d._defnr_liste_fichr_a_telvr(j.target.files);d._defnr_outpt(d.var_liste_fichr);d._selct_termn()}function c(j){j.stopPropagation();j.preventDefault();console.log("fichr dans la liste= "+d.var_liste_fichr.liste_fichr.length);if(!d.optio.vbo_telvr_multp&&(j.dataTransfer.files.length>1||d.var_liste_fichr.liste_fichr.length>0)){alert(d.optio.vva_mesg_limt_telvr);return false}d._defnr_liste_fichr_a_telvr(j.dataTransfer.files);d._defnr_outpt(d.var_liste_fichr);d._selct_termn()}function b(j){j.stopPropagation();j.preventDefault();j.dataTransfer.dropEffect="copy"}return d}};