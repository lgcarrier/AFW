afw.afw_21.regn.arbre={insta:[],arbre:function(p){this.jQuery=afw.jQuery;var i=this;this.node=false;this.id=false;this.stock_sesn_json_arbre=false;this.stock_sesn_json_type_noeud=false;this.stock_sesn_rafrc_arbre=false;this.stock_sesn_stat_plugn=false;this.obten_stock_sesn_json_arbre=m;this.obten_stock_sesn_json_type_noeud=a;this.obten_stock_sesn_json_arbre_string=g;this.obten_stock_sesn_json_type_noeud_string=f;this.obten_stock_sesn_stat_plugn=k;this.suprm_stock_sesn=h;this.initl=q;this._afect_toltp=l;this._defnr_json_arbre=o;this._defnr_json_type_noeud=j;this._obten_json_arbre=b;this._obten_json_type_noeud_arbre=n;this._obten_json_initl_arbre=e;this._rafrc_json_initl_arbre=d;this._initl_arbre=c;this.optio={vva_id_div_regn:"",vva_id_regn:"",vva_seqnc_plugn:"",vjs_arbre:[],vva_async:true,vva_type_reqst:"POST",vva_reqst_url:"wwv_flow.show",vva_flow_id:afw.afw_11.prodt.obten_numr_apex(),vva_flow_step_id:afw.afw_13.page.obten_numr_apex(),vva_insta:afw.afw_07.sesn.obten_numr_apex(),vva_plugn_ajax:"",vva_item_noeud:"",vjs_noeud_actif:[],vjs_theme:{vva_theme:"afw",vbo_point:false,vbo_icone:true},vjs_core:{vnu_animt:0},vva_mode_cache:"",vbo_charg_progr:true,vbo_rafrc_arbre:false,vjs_type_noeud:{},vva_selct_jquer_depsr_elemn:false,vva_selct_jquer_glisr_elemn:false,vva_item_fin_actio_glisr_elemn_arbre:"",vjs_mesg:{vva_stat_ok:"Initialisation reussie",vva_stat_ereur:"Erreur lors de l'initialisation."}};this.initl(p);return i;function m(){return afw.afw_07.stock_sesn.obten_item(i.stock_sesn_json_arbre,"json")}function a(){return afw.afw_07.stock_sesn.obten_item(i.stock_sesn_json_type_noeud,"json")}function g(){return afw.afw_07.stock_sesn.obten_item(i.stock_sesn_json_arbre)}function f(){return afw.afw_07.stock_sesn.obten_item(i.stock_sesn_json_type_noeud)}function k(){return afw.afw_07.stock_sesn.obten_item(i.stock_sesn_stat_plugn)}function h(){afw.afw_07.stock_sesn.suprm_item(i.stock_sesn_json_arbre);afw.afw_07.stock_sesn.suprm_item(i.stock_sesn_json_type_noeud);afw.afw_07.stock_sesn.suprm_item(i.stock_sesn_rafrc_arbre);afw.afw_07.stock_sesn.suprm_item(i.stock_sesn_stat_plugn)}function q(r){i.optio=i.jQuery.extend(i.optio,r);try{switch(typeof(i.optio.vva_id_div_regn)){case"string":i.node=document.getElementById(i.optio.vva_id_div_regn);break;case"object":i.node=i.optio.vva_id_div_regn;break;default:i.node=false;break}}catch(s){i.node=false}if(i.node){i.id=i.node.id;i.stock_sesn_rafrc_arbre="afw.afw_21.regn.arbre."+i.optio.vva_seqnc_plugn+".rafrc_json_arbre";i.stock_sesn_json_arbre="afw.afw_21.regn.arbre."+i.optio.vva_seqnc_plugn+".json_arbre";i.stock_sesn_json_type_noeud="afw.afw_21.regn.arbre."+i.optio.vva_seqnc_plugn+".json_type_noeud";i.stock_sesn_stat_plugn="afw.afw_21.regn.arbre."+i.optio.vva_seqnc_plugn+".stat_plugn";if(i.optio.vva_mode_cache=="AUCUN"||i.optio.vbo_rafrc_arbre||i.jQuery.isEmptyObject(m())){i._obten_json_initl_arbre()}else{if(afw.afw_07.stock_sesn.obten_item(i.stock_sesn_rafrc_arbre)=="1"&&!i.jQuery.isEmptyObject(m())){i._rafrc_json_initl_arbre()}else{i.optio.vjs_arbre=m();i.optio.vjs_type_noeud=a();c()}}}}function l(){i.jQuery("li a[title]",i.node).cluetip({hideLocal:false,clickThrough:true,showTitle:true,positionBy:"auto",arrows:true,splitTitle:"|",hoverIntent:{sensitivity:1,interval:100,timeout:1800}})}function o(r){afw.afw_07.stock_sesn.defnr_item(i.stock_sesn_rafrc_arbre,1);afw.afw_07.stock_sesn.suprm_item(i.stock_sesn_rafrc_arbre);afw.afw_07.stock_sesn.defnr_item(i.stock_sesn_json_arbre,r);i.optio.vjs_arbre=r;c()}function j(r){afw.afw_07.stock_sesn.defnr_item(i.stock_sesn_json_type_noeud,r);i.optio.vjs_type_noeud=r}function b(){i.jQuery.exec_aplic_procs({plugn_ajax:i.optio.vva_plugn_ajax,widget_action:"OBTEN_JSON_ARBRE",sucs_procs:i._defnr_json_arbre})}function n(){i.jQuery.exec_aplic_procs({plugn_ajax:i.optio.vva_plugn_ajax,widget_action:"OBTEN_JSON_TYPE_NOEUD",sucs_procs:function(r){i._defnr_json_type_noeud(r);i._obten_json_arbre()}})}function e(){i._obten_json_type_noeud_arbre()}function d(){i.optio.vjs_type_noeud=a();i._obten_json_arbre()}function c(){try{i.jQuery("#"+i.optio.vva_id_div_regn).bind("open_node.jstree",function(u,v){try{var s=v.args[0].attr("id")}catch(t){var s=v.args[0].id}s=s.substr(s.indexOf("_")+1);i.jQuery.exec_aplic_procs({plugn_ajax:i.optio.vva_plugn_ajax,widget_action:"OUVRI_NOEUD",x01:s});afw.afw_07.stock_sesn.defnr_item(i.stock_sesn_rafrc_arbre,1);l()}).bind("close_node.jstree",function(u,v){try{var s=v.args[0].attr("id")}catch(t){var s=v.args[0].id}s=s.substr(s.indexOf("_")+1);i.jQuery.exec_aplic_procs({plugn_ajax:i.optio.vva_plugn_ajax,widget_action:"FERMR_NOEUD",x01:s});afw.afw_07.stock_sesn.defnr_item(i.stock_sesn_rafrc_arbre,1)}).bind("select_node.jstree",function(s,t){if(!!t.args[1]){i.jQuery.exec_aplic_procs({plugn_ajax:i.optio.vva_plugn_ajax,widget_action:"SELCT_NOEUD",x01:t.rslt.obj.attr("id"),sucs_procs:function(){window.location=t.args[0].href}})}}).bind("loaded.jstree",function(){l()}).jstree({core:{animation:i.optio.vjs_core.vnu_animt},themes:{theme:i.optio.vjs_theme.vva_theme,dots:i.optio.vjs_theme.vbo_point,icons:i.optio.vjs_theme.vbo_icone},types:i.optio.vjs_type_noeud,ui:{select_limit:1,initially_select:i.optio.vjs_noeud_actif},dnd:{drop_target:i.optio.vva_selct_jquer_depsr_elemn,drag_target:i.optio.vva_selct_jquer_glisr_elemn,drag_check:function(s){if(s.r.attr("rel")=="racn"){return false}return{after:false,before:false,inside:true}},drag_finish:function(s){i.jQuery.exec_aplic_procs({plugn_ajax:i.optio.vva_plugn_ajax,widget_action:"GLISR_ELEMN_ARBRE",x01:s.o.id,x02:s.r.attr("id"),sucs_procs:function(){afw.afw_13.page.item.defnr_valr(i.optio.vva_item_fin_actio_glisr_elemn_arbre,s.o.id)}})}},json_data:{progressive_render:i.optio.vbo_charg_progr,data:i.optio.vjs_arbre,ajax:{async:i.optio.vva_async,type:i.optio.vva_type_reqst,url:i.optio.vva_reqst_url,data:function(w){if(w!=-1){var v=[];var u=[];var s;var t;t="OBTEN_JSON_NOEUD";s=i.jQuery(w).attr("id");s=s.substr(s.indexOf("_")+1);return{p_flow_id:i.optio.vva_flow_id,p_flow_step_id:i.optio.vva_flow_step_id,p_instance:i.optio.vva_insta,p_request:"PLUGIN="+i.optio.vva_plugn_ajax,p_arg_names:v,p_arg_values:u,p_widget_action:t,x01:s}}return{}},success:function(s){if(!!s){return s.d}}}},plugins:["themes","json_data","ui","types","dnd"]});afw.afw_07.stock_sesn.defnr_item(i.stock_sesn_stat_plugn,i.optio.vjs_mesg.vva_stat_ok)}catch(r){afw.afw_07.stock_sesn.defnr_item(i.stock_sesn_stat_plugn,i.optio.vjs_mesg.vva_stat_ereur)}}return i}};