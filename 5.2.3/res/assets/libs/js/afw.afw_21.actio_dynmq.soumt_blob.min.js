afw.afw_21.actio_dynmq.soumt_blob={insta:[],obten:function(b){var c;for(var a=0;a<afw.afw_21.actio_dynmq.soumt_blob.insta.length;a++){if(afw.afw_21.actio_dynmq.soumt_blob.insta[a].id==b){c=afw.afw_21.actio_dynmq.soumt_blob.insta[a];break}}return c},suprm:function(b){for(var a=0;a<afw.afw_21.actio_dynmq.soumt_blob.insta.length;a++){if(afw.afw_21.actio_dynmq.soumt_blob.insta[a].id==b){afw.afw_21.actio_dynmq.soumt_blob.insta.splice(a,1)}}},soumt_blob:function(j,a){this.jQuery=afw.jQuery;var c=this;this.id=false;this.initl=m;this.vnu_nombr_telvr_blob=0;this.vva_mode_telvr="DATA_URL";this._telvr_text=d;this._telvr_binary=b;this._telvr_array_buffer=h;this._telvr_data_url=n;this._telvr_data_url_portn=l;this._telvr_fichr=f;this._creer_colct_blob=g;this.optio={vnu_id_actio_dynmq:"",vva_html_id_actio_dynmq:"",vva_nom_plugn:"",vva_reqt_soums_page:"",var_liste_items:[],vbo_ckedt:true,vva_plugn_ajax:""};this.initl(j);return c;function m(p){c.optio=c.jQuery.extend(true,c.optio,p);c.id=c.optio.vva_html_id_actio_dynmq;var o="soumt_"+c.optio.vva_reqt_soums_page+((c.optio.vva_reqt_soums_page!="")?"_":"")+"blob_termn";c.jQuery(document).bind(o,function(q,r){});c._creer_colct_blob();c.jQuery(document).trigger(o)}function k(){c.vnu_nombr_telvr_blob++;apex.event.trigger(c.jQuery(document),"debut_telvr."+c.optio.vva_nom_plugn)}function e(){c.vnu_nombr_telvr_blob--;if(c.vnu_nombr_telvr_blob==0){apex.event.trigger(c.jQuery(document),"termn_telvr."+c.optio.vva_nom_plugn)}}function i(p,q,o){afw.jQuery.exec_aplic_procs({async:false,plugn_ajax:c.optio.vva_plugn_ajax,procs_retrn_data_type:"text",widget_action:"TERMR_TELVR_PORTN_BLOB",x01:p,x02:q,sucs_procs:function(r){afw.afw_21.regn.telvr_fichr.insta[0].var_liste_fichr.liste_fichr[o].indic_a_telvr=false;e()}})}function d(q,o){k();var p=new FileReader();p.onprogress=function(r){if(r.lengthComputable){var s=c.jQuery("progress","#fichr_"+q.seqnc).get(0);s.setAttribute("value",r.loaded);s.setAttribute("max",r.total)}};p.onload=function(r){};p.onloadend=function(r){var s=$s_Split(r.target.result,4000);afw.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,procs_retrn_data_type:"text",widget_action:"TELVR_BLOB",x01:q.fichr.name,x02:q.fichr.type,f01:s,sucs_procs:function(u){afw.afw_21.regn.telvr_fichr.insta[0].var_liste_fichr.liste_fichr[o].indic_a_telvr=false;e();if(r.lengthComputable){var t=c.jQuery("progress","#fichr_"+q.seqnc).get(0);t.setAttribute("value",r.total);t.setAttribute("max",r.total);c.jQuery("progress","#fichr_"+q.seqnc).after("100%")}}})};p.readAsText(q.fichr)}function b(q,o){k();var p=new FileReader();p.onprogress=function(r){if(r.lengthComputable){var s=c.jQuery("progress","#fichr_"+q.seqnc).get(0);s.setAttribute("value",r.loaded);s.setAttribute("max",r.total)}};p.onload=function(r){};p.onloadend=function(r){var s=$s_Split(r.target.result,4000);afw.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,procs_retrn_data_type:"text",widget_action:"TELVR_BLOB",x01:q.fichr.name,x02:q.fichr.type,f01:s,sucs_procs:function(u){afw.afw_21.regn.telvr_fichr.insta[0].var_liste_fichr.liste_fichr[o].indic_a_telvr=false;e();if(r.lengthComputable){var t=c.jQuery("progress","#fichr_"+q.seqnc).get(0);t.setAttribute("value",r.total);t.setAttribute("max",r.total);c.jQuery("progress","#fichr_"+q.seqnc).after("100%")}}})};p.readAsBinaryString(q.fichr)}function n(q,o){k();var p=new FileReader();p.onprogress=function(r){if(r.lengthComputable){var s=c.jQuery("progress","#fichr_"+q.seqnc).get(0);s.setAttribute("value",r.loaded);s.setAttribute("max",r.total)}};p.onload=function(r){};p.onloadend=function(r){var s=$s_Split(r.target.result.replace(/^.*base64,/,""),4000);afw.jQuery.exec_aplic_procs({async:true,plugn_ajax:c.optio.vva_plugn_ajax,procs_retrn_data_type:"text",widget_action:"TELVR_BLOB",x01:q.fichr.name,x02:q.fichr.type,f01:s,sucs_procs:function(u){afw.afw_21.regn.telvr_fichr.insta[0].var_liste_fichr.liste_fichr[o].indic_a_telvr=false;e();if(r.lengthComputable){var t=c.jQuery("progress","#fichr_"+q.seqnc).get(0);t.setAttribute("value",r.total);t.setAttribute("max",r.total);c.jQuery("progress","#fichr_"+q.seqnc).after("100%")}}})};p.readAsDataURL(q.fichr)}function l(q,o){k();var p=new FileReader();p.onload=function(r){};p.onloadend=function(r){afw.jQuery.exec_aplic_procs({plugn_ajax:c.optio.vva_plugn_ajax,widget_action:"CREER_COLCT_PORTN_BLOB",sucs_procs:function(y){var t=256;var x=$s_Split(r.target.result.replace(/^.*base64,/,""),4000);var w=Math.ceil(x.length/t);var v=0;while(t<=x.length||x.length>0){v++;var s=(v/w)*100;if(t>x.length){t=x.length}var u=x.splice(0,t);afw.jQuery.exec_aplic_procs({async:false,plugn_ajax:c.optio.vva_plugn_ajax,procs_retrn_data_type:"text",widget_action:"TELVR_PORTN_BLOB",x01:q.fichr.name,x02:q.fichr.type,x03:v,f01:u,sucs_procs:function(A){var B=c.jQuery("progress","#fichr_"+q.seqnc).get(0);var z=c.jQuery("progress > span.percent","#fichr_"+q.seqnc).get(0);B.value=s;z.innerHTML=s;c.jQuery("progress","#fichr_"+q.seqnc).animate({value:s},1);if(x.length==0){i(q.fichr.name,q.fichr.type,o)}}})}}})};p.readAsDataURL(q.fichr)}function h(q,o){k();var p=new FileReader();p.onprogress=function(r){if(r.lengthComputable){var s=c.jQuery("progress","#fichr_"+q.seqnc).get(0);s.setAttribute("value",r.loaded);s.setAttribute("max",r.total)}};p.onload=function(r){};p.onloadend=function(r){var t=[];var u=0;var s=r.target.result.byteLength;while(u<s){sliced=String.fromCharCode.apply("",new Uint8Array(r.target.result,u,Math.min(4000,s-u)));t.push(sliced);u+=4000}afw.jQuery.exec_aplic_procs({plugn_ajax:c.optio.vva_plugn_ajax,procs_retrn_data_type:"text",widget_action:"TELVR_BLOB",x01:q.fichr.name,x02:q.fichr.type,f01:t,sucs_procs:function(w){afw.afw_21.regn.telvr_fichr.insta[0].var_liste_fichr.liste_fichr[o].indic_a_telvr=false;e();if(r.lengthComputable){var v=c.jQuery("progress","#fichr_"+q.seqnc).get(0);v.setAttribute("value",r.total);v.setAttribute("max",r.total);c.jQuery("progress","#fichr_"+q.seqnc).after("100%")}}})};p.readAsArrayBuffer(q.fichr)}function f(){c.jQuery(afw.afw_21.regn.telvr_fichr.insta[0].var_liste_fichr.liste_fichr).each(function(o,p){if(p.indic_a_telvr){switch(c.vva_mode_telvr){case"TEXT":c._telvr_text(p,o);break;case"BINARY":c._telvr_binary(p,o);break;case"ARRAY_BUFFER":c._telvr_array_buffer(p,o);break;case"DATA_URL":c._telvr_data_url_portn(p,o);default:break}}})}function g(){afw.jQuery.exec_aplic_procs({plugn_ajax:c.optio.vva_plugn_ajax,widget_action:"CREER_COLCT_BLOB",sucs_procs:function(o){c._telvr_fichr()}})}return c}};