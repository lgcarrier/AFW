afw.afw_21.regn.calnd={insta:[],obten:function(b){var c;for(var a=0;a<afw.afw_21.regn.calnd.insta.length;a++){if(afw.afw_21.regn.calnd.insta[a].id==b){c=afw.afw_21.regn.calnd.insta[a];break}}return c},suprm:function(b){for(var a=0;a<afw.afw_21.regn.calnd.insta.length;a++){if(afw.afw_21.regn.calnd.insta[a].id==b){afw.afw_21.regn.calnd.insta.splice(a,1)}}},calnd:function(a){this.jQuery=afw.jQuery;var d=this;this.node=false;this.id=false;this.var_evenm_sourc=[];this.var_liste_evenm=[];this.vjs_evenm_orign={};this.vbo_stat_deplc=false;this.toltp_aide_insta=false;this.initl=g;this.obten_calnd=o;this._defnr_actio_selct=r;this._defnr_actio_choix_evenm=m;this._defnr_actio_deplc_evenm=h;this._ajout_evenm=b;this._ajout_liste_evenm=e;this._suprm_evenm=i;this._suprm_liste_evenm=f;this._modfr_liste_evenm=j;this.modfr_evenm=y;this._deplc_evenm_deprt=p;this._deplc_evenm_fin=k;this._ajust_evenm=n;this._detrm_heure_debut=c;this._detrm_heure_fin=l;this._afich_aide_insta=w;this._fermr_aide_insta=t;this._suprm_toltp_aide_insta=x;this._genr_liste_evenm_agend=s;this._ajout_agend=q;this._suprm_agend=v;this.afich_liste_agend=u;this.optio={vva_mode_calnd:"agendaWeek",vjs_date_calnd:{vva_an:undefined,vva_mois:undefined,vva_jour:undefined},vbo_theme_jquer_ui:true,vjs_entet:{gauch:"",centr:"",droit:""},vnu_premr_jour_semn:0,vbo_afich_fin_semn:true,vva_afich_nombr_semn:"fixed",vjs_libl:{vjs_boutn:{vva_precd:"&nbsp;&#9668;&nbsp;",vva_suivn:"&nbsp;&#9658;&nbsp;",vva_an_precd:"&nbsp;&lt;&lt;&nbsp;",vva_an_suivn:"&nbsp;&gt;&gt;&nbsp;",vva_aujrd:"Aujourd'hui",vva_mois:"Mois",vva_semn:"Semaine",vva_jour:"Jour"},vjs_titre:{var_mois:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],var_abrev_mois:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Dec"],var_jour:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],var_abrev_jour:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],vva_journ_compl:"Journée"}},vjs_formt:{vjs_temps:{vva_agend:"H:mm{ - H:mm}",vva_autre:"H:mm{ - H:mm}"},vjs_agend:{vva_formt_axe_y:"H:mm",vnu_nombr_mints:15,vva_premr_heure:8,vva_heure_debut:8,vva_heure_fin:17,vva_heure_debut_exten:undefined,vva_heure_fin_exten:undefined},vjs_coln:{vva_mois:"dddd",vva_semn:"dddd, d",vva_jour:""},vjs_titre:{vva_mois:"MMMM yyyy",vva_semn:"d MMMM yyyy {'au' d MMMM yyyy}",vva_jour:"dddd, d MMMM, yyyy"}},vbo_modfb:true,vva_id_regn:"",vva_nom_plugn:"",vva_clas_css:"regn_calnd",var_liste_agend:[],vva_async:true,vva_type_reqst:"POST",vva_reqst_url:"wwv_flow.show",vva_flow_id:afw.afw_11.prodt.obten_numr_apex(),vva_flow_step_id:afw.afw_13.page.obten_numr_apex(),vva_insta:afw.afw_07.sesn.obten_numr_apex(),vva_plugn_ajax:""};this.initl(a);return d;function g(z){d.optio=d.jQuery.extend(true,d.optio,z);try{d.node=document.getElementById(d.optio.vva_id_regn)}catch(A){d.node=false}if(d.node){d.id=d.node.id;d.jQuery("#"+d.optio.vva_id_regn).addClass(d.optio.vva_clas_css).fullCalendar({defaultView:d.optio.vva_mode_calnd,theme:d.optio.vbo_theme_jquer_ui,header:{left:d.optio.vjs_entet.gauch,center:d.optio.vjs_entet.centr,right:d.optio.vjs_entet.droit},firstDay:d.optio.vnu_premr_jour_semn,weekends:d.optio.vbo_afich_fin_semn,weekMode:d.optio.vva_afich_nombr_semn,viewDisplay:function(B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"viewDisplay."+d.optio.vva_nom_plugn);d.jQuery.exec_aplic_procs({plugn_ajax:d.optio.vva_plugn_ajax,widget_action:"DEFNR_ETAT_CALND",x01:B.name,x02:B.calendar.getDate().getTime()})},windowResize:function(B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"windowResize."+d.optio.vva_nom_plugn)},allDaySlot:false,allDayText:d.optio.vjs_libl.vjs_titre.vva_journ_compl,axisFormat:d.optio.vjs_formt.vjs_agend.vva_formt_axe_y,slotMinutes:d.optio.vjs_formt.vjs_agend.vnu_nombr_mints,firstHour:d.optio.vjs_formt.vjs_agend.vva_premr_heure,minTime:d.optio.vjs_formt.vjs_agend.vva_heure_debut,maxTime:d.optio.vjs_formt.vjs_agend.vva_heure_fin,year:d.optio.vjs_date_calnd.vva_an,month:d.optio.vjs_date_calnd.vva_mois,date:d.optio.vjs_date_calnd.vva_jour,timeFormat:{agenda:d.optio.vjs_formt.vjs_temps.vva_agend,"":d.optio.vjs_formt.vjs_temps.vva_autre},columnFormat:{month:d.optio.vjs_formt.vjs_coln.vva_mois,week:d.optio.vjs_formt.vjs_coln.vva_semn,day:d.optio.vjs_formt.vjs_coln.vva_jour},titleFormat:{month:d.optio.vjs_formt.vjs_titre.vva_mois,week:d.optio.vjs_formt.vjs_titre.vva_semn,day:d.optio.vjs_formt.vjs_titre.vva_jour},buttonText:{prev:d.optio.vjs_libl.vjs_boutn.vva_precd,next:d.optio.vjs_libl.vjs_boutn.vva_suivn,prevYear:d.optio.vjs_libl.vjs_boutn.vva_an_precd,nextYear:d.optio.vjs_libl.vjs_boutn.vva_an_suivn,today:d.optio.vjs_libl.vjs_boutn.vva_aujrd,month:d.optio.vjs_libl.vjs_boutn.vva_mois,week:d.optio.vjs_libl.vjs_boutn.vva_semn,day:d.optio.vjs_libl.vjs_boutn.vva_jour},monthNames:d.optio.vjs_libl.vjs_titre.var_mois,monthNamesShort:d.optio.vjs_libl.vjs_titre.var_abrev_mois,dayNames:d.optio.vjs_libl.vjs_titre.var_jour,dayNamesShort:d.optio.vjs_libl.vjs_titre.var_abrev_jour,dayClick:function(D,E,C,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"dayclick."+d.optio.vva_nom_plugn)},eventClick:function(D,C,B){d._defnr_actio_choix_evenm(D,C,B)},eventMouseover:function(D,C,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventmouseover."+d.optio.vva_nom_plugn);d._afich_aide_insta(D,C,B)},eventMouseout:function(D,C,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventmouseout."+d.optio.vva_nom_plugn);d._fermr_aide_insta(D,C,B)},selectable:true,selectHelper:true,unselectAuto:false,unselectCancel:"",select:function(B,F,E,D,C){d._defnr_actio_selct(B,F,E,D,C)},unselect:function(C,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"unselect."+d.optio.vva_nom_plugn)},lazyFetching:false,eventSources:[],loading:function(C,B){afw.afw_13.page.animt_charg(C);apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"loading."+d.optio.vva_nom_plugn);if(C){d._suprm_toltp_aide_insta();apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"loadingstart."+d.optio.vva_nom_plugn)}else{apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"loadingstop."+d.optio.vva_nom_plugn)}},eventRender:function(D,C,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventrender."+d.optio.vva_nom_plugn)},eventAfterRender:function(D,C,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventafterrender."+d.optio.vva_nom_plugn)},editable:d.optio.vbo_modfb,eventDragStart:function(D,C,E,B){d.vbo_stat_deplc=true;d._suprm_toltp_aide_insta();d._deplc_evenm_deprt(D,C,E,B)},eventDragStop:function(D,C,E,B){d.vbo_stat_deplc=false;d._deplc_evenm_fin(D,C,E,B)},eventDrop:function(G,E,D,I,F,C,H,B){d._defnr_actio_deplc_evenm(G,E,D,I,F,C,H,B)},eventResizeStart:function(D,C,E,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventresizestart."+d.optio.vva_nom_plugn)},eventResizeStart:function(D,C,E,B){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventresizestart."+d.optio.vva_nom_plugn)},eventResize:function(G,E,D,F,C,H,B){d._ajust_evenm(G,E,D,F,C,H,B)},droppable:false,drop:function(C,E,B,D){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"drop."+d.optio.vva_nom_plugn)}})}}function o(){return d.jQuery("#"+d.id).fullCalendar("getView").calendar}function r(z,D,C,B,A){d.jQuery.exec_aplic_procs({plugn_ajax:d.optio.vva_plugn_ajax,widget_action:"DEFNR_ACTIO_SELCT",x01:(C)?"O":"N",x02:d.jQuery.fullCalendar.formatDate(z,"yyyyMMdd HH:mm"),x03:d.jQuery.fullCalendar.formatDate(D,"yyyyMMdd HH:mm"),sucs_procs:function(){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"select."+d.optio.vva_nom_plugn)}});A.calendar.unselect()}function m(C,A,z){var B=C.ident;d.var_liste_evenm=z.calendar.clientEvents(function(D){return(D.ident==B)});d.jQuery.exec_aplic_procs({plugn_ajax:d.optio.vva_plugn_ajax,widget_action:"DEFNR_ACTIO_CHOIX_EVENM",x01:C.ident,sucs_procs:function(){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventclick."+d.optio.vva_nom_plugn)}});z.calendar.unselect()}function h(z,A,C,H,B,D,E,F){var G;if(d.vjs_evenm_orign.allDay&&!H){if(z.end==null){G=new Date(z.start.getTime())}else{G=new Date(z.end.getTime())}z.end=d.jQuery.fullCalendar.parseDate(G.toDateString());z.end.setHours(d.optio.vjs_formt.vjs_agend.vva_heure_fin);z.end.setMinutes(0);z.end.setSeconds(0)}else{if(!d.vjs_evenm_orign.allDay&&H){z.start.setHours(0);z.start.setMinutes(0);z.start.setSeconds(0);if(z.end!=null){G=new Date(z.end.getTime()-86400);z.end=d.jQuery.fullCalendar.parseDate(G.toDateString());z.end.setHours(0);z.end.setMinutes(0);z.end.setSeconds(0)}}}d.jQuery.exec_aplic_procs({plugn_ajax:d.optio.vva_plugn_ajax,widget_action:"DEFNR_ACTIO_DEPLC_EVENM",x01:z.ident,x02:(H)?"O":"N",x03:d.jQuery.fullCalendar.formatDate(z.start,"yyyyMMdd HH:mm"),x04:d.jQuery.fullCalendar.formatDate(z.end,"yyyyMMdd HH:mm"),sucs_procs:function(){var I=z.ident;d.var_liste_evenm=F.calendar.clientEvents(function(L){if(L.ident==I){return true}else{return false}});for(var K=0,J=d.var_liste_evenm.length;K<J;K++){d.obten_calnd().updateEvent(d.var_liste_evenm[K])}apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventdrop."+d.optio.vva_nom_plugn)}});F.calendar.unselect()}function b(A){if(d.var_evenm_sourc["agend_"+A.agend]!=undefined){var z={title:A.titre,start:(A.date_journ_compl!="")?d.jQuery.fullCalendar.parseDate(A.date_journ_compl):d.jQuery.fullCalendar.parseDate(A.date_debut),end:(A.date_fin_journ_compl!="")?d.jQuery.fullCalendar.parseDate(A.date_fin_journ_compl):d.jQuery.fullCalendar.parseDate(A.date_fin),allDay:(A.indic_journ_compl=="true")?true:false,className:A.clas_css,id:A.agend+":"+A.ident,ident:A.ident,agend:A.agend,descr:A.descr,titre_aide_insta:A.titre_aide_insta,aide_insta:A.aide_insta};d.obten_calnd().renderEvent(z,true);z.source=d.var_evenm_sourc["agend_"+A.agend];d.obten_calnd().updateEvent(z)}}function e(B){for(var A=0,z=B.length;A<z;A++){d._ajout_evenm(B[A])}}function i(z){d.obten_calnd().removeEvents(z.id)}function f(B){for(var A=0,z=B.length;A<z;A++){d._suprm_evenm(B[A])}d.var_liste_evenm=[]}function j(z){d.obten_calnd().refetchEvents()}function y(z){d.jQuery.exec_aplic_procs({plugn_ajax:d.optio.vva_plugn_ajax,widget_action:"OBTEN_JSON_EVENM",x01:z,sucs_procs:function(A){if(A.row.length>0){d._modfr_liste_evenm(A.row)}else{d._suprm_evenm(d.var_liste_evenm);d.var_liste_evenm=[]}}})}function p(B,A,C,z){d.vjs_evenm_orign={allDay:B.allDay,end:B.end};apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventdragstart."+d.optio.vva_nom_plugn)}function k(B,A,C,z){apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventdragstop."+d.optio.vva_nom_plugn)}function n(E,C,B,D,A,F,z){d.jQuery.exec_aplic_procs({plugn_ajax:d.optio.vva_plugn_ajax,widget_action:"DEFNR_ACTIO_AJUST_EVENM",x01:E.ident,x02:d.jQuery.fullCalendar.formatDate(E.end,"yyyyMMdd HH:mm"),sucs_procs:function(){var G=E.ident;d.var_liste_evenm=z.calendar.clientEvents(function(J){return(J.ident==G)});for(var I=0,H=d.var_liste_evenm.length;I<H;I++){d.obten_calnd().updateEvent(d.var_liste_evenm[I])}apex.event.trigger(d.jQuery("#"+d.optio.vva_id_regn),"eventresize."+d.optio.vva_nom_plugn)}})}function c(){var z=false;if(d.optio.vjs_formt.vjs_agend.vva_heure_debut_exten!=undefined){z=true}if(z){d.jQuery("#"+d.optio.vva_id_regn).fullCalendar("options","minTime",d.optio.vjs_formt.vjs_agend.vva_heure_debut_exten)}else{}}function l(){}function w(B,A,z){if(!d.vbo_stat_deplc){if(B.aide_insta!=""&&B.aide_insta!="undefined"){d.jQuery(A.currentTarget).attr("title",B.titre_aide_insta+"|"+B.aide_insta).cluetip({cursor:"pointer",positionBy:"auto",hideLocal:false,clickThrough:false,showTitle:true,splitTitle:"|",fx:{open:"fadeIn",openSpeed:"fast"},onShow:function(C,D){d.toltp_aide_insta=C}})}}}function t(B,A,z){}function x(){if(d.toltp_aide_insta){d.toltp_aide_insta.remove();d.toltp_aide_insta=false}}function s(C){var A=[];for(var B=0,z=C.row.length;B<z;B++){A.push({id:C.row[B].agend+":"+C.row[B].ident,ident:C.row[B].ident,title:C.row[B].titre,descr:C.row[B].descr,allDay:C.row[B].indic_journ_compl,start:(C.row[B].indic_journ_compl)?d.jQuery.fullCalendar.parseDate(C.row[B].date_journ_compl):d.jQuery.fullCalendar.parseDate(C.row[B].date_debut),end:(C.row[B].indic_journ_compl)?d.jQuery.fullCalendar.parseDate(C.row[B].date_fin_journ_compl):d.jQuery.fullCalendar.parseDate(C.row[B].date_fin),className:C.row[B].clas_css,editable:C.row[B].indic_modfb,titre_aide_insta:C.row[B].titre_aide_insta,aide_insta:C.row[B].aide_insta,agend:C.row[B].agend})}return A}function q(z){d.var_evenm_sourc["agend_"+z]={events:function(C,A,B){d.jQuery.exec_aplic_procs({plugn_ajax:d.optio.vva_plugn_ajax,widget_action:"OBTEN_JSON_EVENM_AGEND",x01:C.getTime(),x02:A.getTime(),x03:z,sucs_procs:function(E){var D=[];D=d._genr_liste_evenm_agend(E);B(D)}})}};d.obten_calnd().addEventSource(d.var_evenm_sourc["agend_"+z])}function v(z){d.obten_calnd().removeEventSource(d.var_evenm_sourc["agend_"+z]);delete d.var_evenm_sourc["agend_"+z]}function u(A){var_liste_agend_exist=[];var_liste_nouv_agend=[];d.jQuery("#"+A+" input:checked").each(function(B){var_liste_nouv_agend.push(d.jQuery(this).val())});for(var z=0;vnu_nombr_agend=d.optio.var_liste_agend.length,z<vnu_nombr_agend;z++){vnu_postn=-1;if((vnu_postn=d.jQuery.inArray(d.optio.var_liste_agend[z],var_liste_nouv_agend))==-1){d._suprm_agend(d.optio.var_liste_agend[z])}else{var_liste_agend_exist.push(var_liste_nouv_agend[vnu_postn]);var_liste_nouv_agend.splice(vnu_postn,1)}}for(var z=0;vnu_nombr_agend=var_liste_nouv_agend.length,z<vnu_nombr_agend;z++){d._ajout_agend(var_liste_nouv_agend[z])}d.optio.var_liste_agend=d.jQuery.merge(var_liste_agend_exist,var_liste_nouv_agend)}}};